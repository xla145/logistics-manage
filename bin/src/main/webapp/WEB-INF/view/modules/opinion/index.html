<#include "../_layout/_layout.html"><#t>
<@header/>
<div class="admin-main">
	<!-- 筛选组 -->
	<blockquote class="layui-elem-quote filter-bar">
		<form class="layui-form" action="/table.html" id="filterForm">
		     <div class="layui-inline">
		      <label class="layui-form-label">开始时间</label>
		      <div class="layui-input-inline">
		        <input type="text" name="startTime" id="date" placeholder="yyyy-mm-dd" autocomplete="off" class="layui-input" onclick="layui.laydate({elem: this})">
		      </div>
		    </div>
		    <div class="layui-inline">
		      <label class="layui-form-label">结束时间</label>
		      <div class="layui-input-inline">
		        <input type="text" name="endTime" id="date" placeholder="yyyy-mm-dd" autocomplete="off" class="layui-input" onclick="layui.laydate({elem: this})">
		      </div>
		    </div>
		    <div class="layui-inline">
		      <label class="layui-form-label">订单号：</label>
		      <div class="layui-input-inline">
		        <input type="text" name="orderId" class="layui-input">
		      </div>
		    </div>
		    <div class="layui-inline">
		      <label class="layui-form-label">订单状态 ：</label>
		      <div class="layui-input-inline">
		        <select name="cardStatus">
				  <option value=" ">全部</option>
				  <option value=1>有效</option>
				  <option value=0>无效</option>
				</select> 
		      </div>
		    </div>
		    <div class="layui-inline">
		      <label class="layui-form-label">流量池：</label>
		      <div class="layui-input-inline">
		        <select name="type">
				  <option value=" ">全部</option>
				  <option value=1>系统根用户</option>
				  <option value=2>商户</option>
				</select> 
		      </div>
		    </div>
		    <div class="layui-inline">
		      <label class="layui-form-label">通道：</label>
		      <div class="layui-input-inline">
		        <select name="channelId">
				  <option value=" ">全部</option>
				  <@module name="option" type="self" groupCode="channelGroup" itemCode="1" class="com.cnm.iot.service.dictionary.impl.DictionaryData"/>
				</select> 
		      </div>
		    </div>
		    <div class="layui-inline">
		      <label class="layui-form-label">资费包：</label>
		      <div class="layui-input-inline">
		       <select name="expensesId">
				  <option value="">全部</option>
				  <@module name="option" type="self" groupCode="expensesGroup" itemCode="zftc" class="com.cnm.iot.service.dictionary.impl.DictionaryData"/>
				</select> 
		      </div>
		    </div>
			<a href="javascript:void(0)" class="layui-btn layui-btn-small" id="search"><i class="layui-icon">&#xe615;</i>搜索</a>
		</form>
	</blockquote>
	<div style="padding: 10px">
            <img src="/resources/images/lv.png" title="流量池预警 ">流量池预警  &nbsp;&nbsp;
            <img src="/resources/images/hong.png" title="无预警值 ">无预警值  &nbsp;&nbsp;
            <img src="/resources/images/hui.png" title="不需要预警值">不需要预警值 &nbsp;&nbsp;
            <img src="/resources/images/zx.gif" alt="" title="注销预警">注销预警&nbsp;&nbsp;
	</div>
	<!-- 表格区域 -->
	<div class="layui-form">
	  <table class="layui-table lay-even clear-padding" lay-skin="line">
	    <thead>
	      <tr>
	        <th class="ckb"><input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose"></th>
	        <th>订单号</th>
	        <th>流量池</th>
	        <th>客户</th>
	        <th>通道名称</th>
	        <th>资费计划↓</th>
	        <th>类型</th>
	        <th>卡板费</th>
	        <th>单价(元)</th>
	        <th>数量</th>
	        <th>功能费</th>
	        <th>周期</th>
	        <th>总价(元)</th>
	        <th>状态</th>
	        <th>预警</th>
	        <th>提交时间</th>
	        <th>操作</th>
	      </tr> 
	    </thead>
	    <tbody id="tbody"></tbody>
	  </table>
	  <!-- 分页容器 -->
	  <div class="layui-show"><div id="page"></div></div>
	</div>
</div>
<#include "_add.html"><#t>
<@footer>
<script type="text/javascript" src="${assets}js/datagrid.js"></script>
<script>
//入口
layui.use(['datagrid','laydate'], function(){
  var $ = layui.jquery;
  var form = layui.form()
  ,datagrid = layui.datagrid();
  
  //表格数据加载插件，可选参数：
  datagrid.init({
	  url: 'list',
	  pageSize: 3,
	  pageEm: 'page',
	  tempEm: 'tbody',
	  filterForm: 'filterForm'
  });
  
  //搜索， 依赖datagrid
  $('#search').bind('click', function(){
	  datagrid.search();	  
  })
  
  //添加、编辑插件可选配置：
  $('#add').bind('click', function(){
	  datagrid.open({
		  url: 'add',
		  content: $('#add-form'),
		  title: '新增卡'
	  });
  })
  
  $('#improtCard').bind('click', function(){
	  var ids = datagrid.getCheckedVal();
	  if(ids.length != 1){
		  layer.msg('请选择一条数据编辑!');
		  return;
	  }
	  //打开编辑框
	  $.get("editView", {uid: ids[0]},function(html){
		//打开编辑页
		  datagrid.open({
			  url: 'edit',
			  content: html,
			  title: '编辑用户'
		  });
	  }, "html")
  })
  
  $('#edit').bind('click', function(){
	  var ids = datagrid.getCheckedVal();
	  if(ids.length != 1){
		  layer.msg('请选择一条数据编辑!');
		  return;
	  }
	  //打开编辑框
	  $.get("editView", {id: ids[0]},function(html){
		//打开编辑页
		  datagrid.open({
			  url: 'edit',
			  content: html,
			  title: '编辑用户'
		  });
	  }, "html")
  })
  
  //删除
  $('#delete').bind('click', function(){
	  var ids = datagrid.getCheckedVal();
	  if(ids.length < 1){
		  layer.msg('请选择至少一条数据删除!');
		  return;
	  }
	  alert(ids)
  });
  
  //打开编辑框
  var editFn = function(id){
	  if(!uid){
		  layer.msg('请选择一条数据编辑!');
		  return;
	  }
	  $.get("editView", {uid: uid},function(html){
		  datagrid.open({
			  url: 'edit',
			  content: html,
			  title: '编辑用户'
		  });
	  }, "html")
  }

});
</script>
</@footer>        