<#include "_layout/_layout2.0.html"><#t>
<@header>
    <link rel="stylesheet" href="${assets}css/main.css" media="all" />
</@header>
    <div id="layui-main">
        <div class="panel_box layui-row layui-col-space10">
            <div class="panel_1 layui-col-md2">
                <a href="javascript:;" data-url="page/message/message.html">
                    <div class="panel_icon">
                        <i class="layui-icon" data-icon="&#xe63a;">&#xe63a;</i>
                    </div>
                    <div class="panel_word newMessage">
                        <span></span>
                        <cite>新消息</cite>
                    </div>
                </a>
            </div>
            <div class="panel_1 layui-col-md2">
                <a href="javascript:;" data-url="page/user/allUsers.html">
                    <div class="panel_icon" style="background-color:#FF5722;">
                        <i class="layui-icon icon-supplierfeatures" data-icon="icon-supplierfeatures"></i>
                    </div>
                    <div class="panel_word userAll">
                        <span></span>
                        <cite>新增人数</cite>
                    </div>
                </a>
            </div>
            <div class="panel_1 layui-col-md2">
                <a href="javascript:;" data-url="page/user/allUsers.html">
                    <div class="panel_icon" style="background-color:#009688;">
                        <i class="layui-icon" data-icon="&#xe613;">&#xe613;</i>
                    </div>
                    <div class="panel_word userAll">
                        <span></span>
                        <cite>用户总数</cite>
                    </div>
                </a>
            </div>
            <div class="panel_1 layui-col-md2">
                <a href="javascript:;" data-url="page/img/images.html">
                    <div class="panel_icon" style="background-color:#5FB878;">
                        <i class="layui-icon" data-icon="&#xe64a;">&#xe64a;</i>
                    </div>
                    <div class="panel_word imgAll">
                        <span></span>
                        <cite>图片总数</cite>
                    </div>
                </a>
            </div>
            <div class="panel_1 layui-col-md2">
                <a href="javascript:;" data-url="page/news/newsList.html">
                    <div class="panel_icon" style="background-color:#F7B824;">
                        <i class="layui-icon icon-form" data-icon="icon-form"></i>
                    </div>
                    <div class="panel_word waitNews">
                        <span></span>
                        <cite>待审核文章</cite>
                    </div>
                </a>
            </div>
            <div class="panel_1 layui-col-md2 max_panel">
                <a href="javascript:;" data-url="page/news/newsList.html">
                    <div class="panel_icon" style="background-color:#2F4056;">
                        <i class="layui-icon icon-rfq" data-icon=".icon-rfq"></i>
                    </div>
                    <div class="panel_word allNews">
                        <span></span>
                        <em>文章总数</em>
                        <cite>文章列表</cite>
                    </div>
                </a>
            </div>
        </div>
        <div class="layui-row layui-col-space10">
            <div class="sysNotice layui-col-md6">
                <div class="layui-collapse" lay-accordion>
                    <h2 class="layui-colla-title">会员注册</h2>
                    <div class="layui-colla-item">
                        <div class="layui-colla-content layui-show" id="member-text" style="width: 500px;height: 300px;"></div>
                    </div>
                </div>
            </div>
            <div class="sysNotice layui-col-md6">
                <div class="layui-collapse" lay-accordion>
                    <h2 class="layui-colla-title">订单</h2>
                    <div class="layui-colla-item">
                        <div class="layui-colla-content layui-show" id="order-text" style="width: 500px;height: 300px;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row layui-col-space10">
            <div class="sysNotice layui-col-md6">
                <div class="layui-collapse" lay-accordion>
                    <h2 class="layui-colla-title">会员注册</h2>
                    <div class="layui-colla-item">
                        <div class="layui-colla-content layui-show" id="rich-text" style="width: 800px;height: 400px; margin: 10px;"></div>
                    </div>
                </div>
            </div>
            <div class="sysNotice layui-col-md6">
                <div class="layui-collapse" lay-accordion>
                    <h2 class="layui-colla-title">系统基本参数</h2>
                    <div class="layui-colla-item">
                        <div class="layui-colla-content layui-show"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<@footer>
<script src="${assets}echarts/echarts.min.js" type="text/javascript"></script>
<script>
    layui.use(['layer','element'], function() {


        var websocket = null;
        //判断浏览器是否支持websocket
        if('WebSocket' in window) {
            websocket = new WebSocket("ws://localhost:8080/hello");
        }else{
            console.log("该浏览器不支持实时通信功能");
        }

        websocket.onopen= function() {
            console.log("websocket连接成功");
        }

        websocket.onclose= function() {
            console.log("websocket连接关闭");
        }


        var $ = layui.jquery;
        var layer = layui.layer, element = layui.element;
        //操作
        var active = {

        }
        //绑定操作按钮
        $('.operator-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });


        // 基于准备好的dom，初始化echarts实例
        var member = echarts.init(document.getElementById('member-text'));

        var order = echarts.init(document.getElementById('order-text'));


        var rich = echarts.init(document.getElementById('rich-text'));


        // 指定图表的配置项和数据
        var option_1 = {
            tooltip: {},
            legend: {
                data:[{name:'销量'},{name:'销量1'}]
            },
            xAxis: {
                data: ["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]
            },
            yAxis: {},
            series: [{
                name: '销量',
                type: 'line',
                data: [5, 20, 36, 10, 10, 20]
            },{
                name: '销量1',
                type: 'line',
                data: [10, 20, 50, 50, 70, 100]
            }]
        };


        var option_2 = {
            color: ['#3398DB'],
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis : [
                {
                    type : 'category',
                    data : ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    axisTick: {
                        alignWithLabel: true
                    }
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'直接访问',
                    type:'bar',
                    barWidth: '60%',
                    data:[10, 52, 200, 334, 390, 330, 220]
                }
            ]
        };

        layui.each(JSON.parse(event.data),function (index,data) {
            rich.setOption({
                title : {
                    text: '用户注册信息',
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    data: ['自注册','用户邀请','邀请卡注册','其他']
                },
                series : [
                    {
                        name: '访问来源',
                        type: 'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data:[
                            {value:data[0], name:'自注册'},
                            {value:data[1], name:'用户邀请'},
                            {value:data[2], name:'邀请卡注册'},
                            {value:data[3], name:'其他'}
                        ],
                        itemStyle: {
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            });
        })


        // 使用刚指定的配置项和数据显示图表。
        order.setOption(option_1);

        member.setOption(option_2);


    });
</script>
</@footer>
